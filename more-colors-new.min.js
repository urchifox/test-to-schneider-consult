$(document).ready(function(){window.isLazyLoadMob=0,window.isLazyLoadPC=1,window.lazyImg="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=",window.scrImg=window.isCDN?`https://cdn.${window.location.hostname.replace("www.","")}/images/products/`:"https://static.insales-cdn.com/images/products/",console.log(window.scrImg),window.yaCounterJs='yaCounter'+$("#yaCounterJs").html(),window.makePCColorsAnalogs=function(o,a,e){o.forEach((o,e)=>{let t=a.eq(e);t.removeClass("before"),o.i?o.t&&t.append(`<a onclick="${window.yaCounterJs}.reachGoal('katalog-dver-drugoy-cvet'); return true;" href="/product/${o.p}"><span class="color-name">${o.t}</span><img class="color-image`+(window.isLazyLoadPC?` lazyload" src="${window.lazyImg}" data-`:'" ')+`src="${window.scrImg}${o.i}"></a>`):t.remove()}),e.find(".another-color.before").remove(),e.slick({dots:!1,arrows:!0,infinite:!1,slidesToShow:4,slidesToScroll:1,vertical:!0,lazyLoad:"ondemand",speed:300,swipe:!0}),document.getElementById("lazyload-script").onload=void new LazyLoad({elements_selector:".lazyload",threshold:500})},window.makeMobileColorsAnalogs=function(o,a,e){o.forEach((o,e)=>{let t=a.eq(e);o.i?o.t&&t.append(`<a onclick="${window.yaCounterJs}.reachGoal('katalog-dver-drugoy-cvet'); return true;" href="/product/${o.p}" `+(window.isLazyLoadMob?'class="lazyload" data-bg="':'style="background-image:')+`url(${window.scrImg}${o.i})"></a>`):t.remove()}),e.find(".mobile-color:empty").remove(),(a=e.find(".mobile-color:not(.mobile-color-full)")).length&&(e.addClass("show-more"),e.not(".slick-initialized").slick({vertical:!0,verticalSwiping:!1,touchThreshold:15,dots:!1,arrows:!0,infinite:!1,slidesToShow:7,slidesToScroll:1,lazyLoad:"ondemand",speed:300,swipe:!0}),document.getElementById("lazyload-script").onload=void new LazyLoad({elements_selector:".lazyload",threshold:500}))},window.makeMobileColorsAnalogsProduct=function(o,a,e,t=0){o.forEach((o,e)=>{let t=a.eq(e);o.i?o.t&&(t.find(".fake-img").remove(),t.append(`<a class="another-color-href" onclick="${window.yaCounterJs}.reachGoal('product-dver-drugoy-cvet'); return true;" href="/product/${o.p}"><img class="lazyload" src="${window.lazyImg}" data-src="${window.scrImg}${o.i}"><span class="another-color-link">${o.t}</span></a>`)):t.remove()}),$(".another-color .fake-img").parent().remove(),$(".another-color:empty").remove(),
a.parent().slick({vertical:!0,verticalSwiping:!1,touchThreshold:15,dots:!1,arrows:!0,infinite:!1,slidesToShow:7,slidesToScroll:1,lazyLoad:"ondemand",speed:300,swipe:!0,outerEdgeLimit:!0}),
/*a.parent().slick({variableWidth:1,dots:!1,arrows:!1,infinite:!1,slidesToShow:10,slidesToScroll:1,lazyLoad:"ondemand",speed:300,swipe:!0,swipeToSlide:!0,touchThreshold:19,outerEdgeLimit:!0,responsive:[{breakpoint:1111,settings:{slidesToShow:9,touchThreshold:15}},{breakpoint:992,settings:{slidesToShow:8,touchThreshold:15}},{breakpoint:881,settings:{slidesToShow:7,touchThreshold:13}},{breakpoint:768,settings:{slidesToShow:10,touchThreshold:19}},{breakpoint:561,settings:{slidesToShow:9,touchThreshold:17}},{breakpoint:491,settings:{slidesToShow:8,touchThreshold:15}},{breakpoint:431,settings:{slidesToShow:7,touchThreshold:13}},{breakpoint:376,settings:{slidesToShow:6,touchThreshold:11}}]}),*/
document.getElementById("lazyload-script").onload=void new LazyLoad({elements_selector:".lazyload",threshold:500})},window.ajaxSend=function(e,t,a,n,s,o,l=null){var i=new XMLHttpRequest;i.open(o,n,!0),i.responseType="json",i.onload=function(){var o=i.status;s(200===o?null:o,i.response,a,n,e,t,l)},"POST"==o&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send()},window.myMemoizedSave=function(o,e,t,a,n,s,l=null){let i=a.replace("/products_by_id/","").replace(".json",""),r=t.data("color");console.log("work",window.location.hostname),e.products.forEach((o,e)=>{var t=o.characteristics.find(o=>o.property_id===r),t={i:o.images[0]?o.images[0].thumb_url.replace(`${window.scrImg}`,""):null,t:t?t.title:null,p:o.permalink};i=i.replaceAll(o.id+",",""),i=i.replaceAll(o.id,""),n.push(t),localStorage.setItem("a_color_"+o.id,JSON.stringify(t))}),emptyProducts=i.split(","),emptyProducts.forEach((o,e)=>{o&&localStorage.setItem("a_color_"+o,JSON.stringify({i:null,t:null,p:null}))}),l?"PCCatalog"==l?window.makePCColorsAnalogs(n,s,t):window.makeMobileColorsAnalogsProduct(n,s,t,l):window.makeMobileColorsAnalogs(n,s,t)},window.MobileColorsAnalogsProductInit=function(){var s="",l=[],o=$(".another-colors-big .manager__analog__new:not(.another-color-full)"),e="Product";o.length&&o.each(function(o,e){let t=$(this),a=t.data("analogid");var n;""!=a?(n=localStorage.getItem("a_color_"+a))?l.push(JSON.parse(n)):s+=""==s?a:","+a:t.remove()}),(s||l.length)&&(s?window.ajaxSend(l,o,o.parent(),"/products_by_id/"+s+".json",window.myMemoizedSave,"GET",e):window.makeMobileColorsAnalogsProduct(l,o,o.parent(),e))},window.MobileColorsAnalogsProductInit();var o=null;$(document).on("mouseout",".catalog__item-container-plus",function(){clearTimeout(o)}),$(document).on("mouseover",".catalog__item-container-plus",function(){var e=$(this);e.hasClass("show-more")||(o=setTimeout(function(){var a="",n=[];e.addClass("show-more");var o=e.find(".another-color");o.length&&(o.each(function(){let o=$(this),e=o.data("analogid");var t;""!=e?(t=localStorage.getItem("a_color_"+e))?n.push(JSON.parse(t)):a+=""==a?e:","+e:o.remove()}),(a||n)&&(a?window.ajaxSend(n,o,o.parent(),"/products_by_id/"+a+".json",window.myMemoizedSave,"GET","PCCatalog"):window.makePCColorsAnalogs(n,o,o.parent())))},500))});let i={};window.MobileColorObserver=new IntersectionObserver(function(o,l){o.forEach(o=>{var s=o.target;if(!s.classList.contains("show-more")){let t=s.getAttribute("data-id");0<o.intersectionRatio?i.hasOwnProperty(t)||(i[t]=setTimeout(function(){l.unobserve(s);var o=$(s),e=o.find(".mobile-color:not(.mobile-color-full)"),a="",n=[];e.each(function(){let o=$(this),e=o.data("analogid");var t;""!=e?(t=localStorage.getItem("a_color_"+e))?n.push(JSON.parse(t)):a+=""==a?e:","+e:o.remove()}),(a||n.length)&&(a?window.ajaxSend(n,e,o,"/products_by_id/"+a+".json",window.myMemoizedSave,"GET"):window.makeMobileColorsAnalogs(n,e,o)),clearTimeout(i[t]),delete i[t]},500)):(clearTimeout(i[t]),delete i[t])}})},{threshold:1});let e=document.querySelectorAll(".mobile-colors:not(.show-more)");e.forEach(o=>{window.MobileColorObserver.observe(o)})});
