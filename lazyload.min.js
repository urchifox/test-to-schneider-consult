var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";function o(e){return e.filter(function(e){return!b(e)})}function r(e,t,n){var r,o,s,a,i,c,l,u,d,f,_;!n&&b(e)||(w(t.callback_enter,e),-1<O.indexOf(e.tagName)&&(c=t,l=function e(t){L(t,!0,c),I(i,e,u)},_=u=function e(t){L(t,!1,c),I(i,l,e)},E(d=i=e,"load",f=l),E(d,"loadeddata",f),E(d,"error",_),y(e,t.class_loading)),o=t,s=(r=e).tagName,(a=g[s])?a(r,o):function(e,t){var n=p&&t.to_webp,r=v(e,t.data_src),o=v(e,t.data_bg);if(r){var s=h(r,n);e.style.backgroundImage='url("'+s+'")'}if(o){var a=h(o,n);e.style.backgroundImage=a}}(r,o),m(e,"was-processed","true"),w(t.callback_set,e))}var e,n={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,to_webp:!1},v=function(e,t){return e.getAttribute("data-"+t)},m=function(e,t,n){var r="data-"+t;null!==n?e.setAttribute(r,n):e.removeAttribute(r)},b=function(e){return"true"===v(e,"was-processed")},u=function(e,t){return m(e,"ll-timeout",t)},d=function(e){return v(e,"ll-timeout")},s=function(e,t){var n,r=new e(t);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:r}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:r})}window.dispatchEvent(n)},h=function(e,t){return t?e.replace(/\.(jpe?g|png)/gi,".webp"):e},t="undefined"!=typeof window,a=t&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=t&&"IntersectionObserver"in window,c=t&&"classList"in document.createElement("p"),p=t&&(!(!(e=document.createElement("canvas")).getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")),l=function(e,t,n,r){for(var o,s=0;o=e.children[s];s+=1)if("SOURCE"===o.tagName){var a=v(o,n);f(o,t,a,r)}},f=function(e,t,n,r){n&&e.setAttribute(t,h(n,r))},g={IMG:function(e,t){var n=p&&t.to_webp,r=t.data_srcset,o=e.parentNode;o&&"PICTURE"===o.tagName&&l(o,"srcset",r,n);var s=v(e,t.data_sizes);f(e,"sizes",s);var a=v(e,r);f(e,"srcset",a,n);var i=v(e,t.data_src);f(e,"src",i,n)},IFRAME:function(e,t){var n=v(e,t.data_src);f(e,"src",n)},VIDEO:function(e,t){var n=t.data_src,r=v(e,n);l(e,"src",n),f(e,"src",r),e.load()}},y=function(e,t){c?e.classList.add(t):e.className+=(e.className?" ":"")+t},w=function(e,t){e&&e(t)},E=function(e,t,n){e.addEventListener(t,n)},_=function(e,t,n){e.removeEventListener(t,n)},I=function(e,t,n){_(e,"load",t),_(e,"loadeddata",t),_(e,"error",n)},L=function(e,t,n){var r,o,s=t?n.class_loaded:n.class_error,a=t?n.callback_load:n.callback_error,i=e.target;r=i,o=n.class_loading,c?r.classList.remove(o):r.className=r.className.replace(new RegExp("(^|\\s+)"+o+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),y(i,s),w(a,i)},O=["IMG","IFRAME","VIDEO"],x=function(e,t,n){r(e,n),t.unobserve(e)},A=function(e){var t=d(e);t&&(clearTimeout(t),u(e,null))},k=function(e){return e.isIntersecting||0<e.intersectionRatio},z=function(e,t){this._settings=_extends({},n,e),this._setObserver(),this.update(t)};return z.prototype={_manageIntersection:function(e){var t,n,r,o,s,a=this._observer,i=this._settings,c=this._settings.load_delay,l=e.target;k(e)&&(c?(t=l,n=a,o=(r=i).load_delay,(s=d(t))||(s=setTimeout(function(){x(t,n,r),A(t)},o),u(t,s))):x(l,a,i)),k(e)||A(l)},_onIntersection:function(e){e.forEach(this._manageIntersection.bind(this)),this._elements=o(this._elements)},_setObserver:function(){var e;i&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),{root:(e=this._settings).container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}))},update:function(e){var t=this,n=this._settings,r=e||n.container.querySelectorAll(n.elements_selector);this._elements=o(Array.prototype.slice.call(r)),!a&&this._observer?this._elements.forEach(function(e){t._observer.observe(e)}):this.loadAll()},destroy:function(){var t=this;this._observer&&(o(this._elements).forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){r(e,this._settings,t)},loadAll:function(){var t=this,e=this._elements;e.forEach(function(e){t.load(e)}),this._elements=o(e)}},t&&function(e,t){if(t)if(t.length)for(var n,r=0;n=t[r];r+=1)s(e,n);else s(e,t)}(z,window.lazyLoadOptions),z});
